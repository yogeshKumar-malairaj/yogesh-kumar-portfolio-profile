<link rel="stylesheet" href="{{ url_for('admin.static', filename='css/dashboard.css') }}">


<div class="p-6 bg-white rounded-xl shadow-md">
  <h2 class="text-2xl font-bold text-gray-800 mb-6">📊 Admin Overview Dashboard</h2>

  <!-- Stats Overview -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <div class="dashboard-card card-blue">
      <p class="text-xl font-bold">{{ stats.total_messages }}</p>
      <p class="text-sm">Messages</p>
    </div>
    <div class="dashboard-card card-green">
      <p class="text-xl font-bold">{{ stats.total_reviews }}</p>
      <p class="text-sm">Reviews</p>
    </div>
    <div class="dashboard-card card-purple">
      <p class="text-xl font-bold">{{ stats.total_projects }}</p>
      <p class="text-sm">Projects</p>
    </div>
    <div class="dashboard-card card-yellow">
      <p class="text-xl font-bold">{{ stats.total_skills }}</p>
      <p class="text-sm">Skills</p>
    </div>
  </div>

  <!-- Ratings Chart -->
  <div class="dashboard-box">
    <h3 class="text-lg font-semibold mb-2">⭐ Review Ratings</h3>
    <canvas id="ratingsChart" height="120"></canvas>
  </div>

  <!-- Recent Messages -->
  <div class="dashboard-box">
    <h3 class="text-lg font-semibold mb-2">📥 Recent Contact Messages</h3>
    <ul class="space-y-2 text-sm">
      {% for msg in recent_messages %}
        <li class="border-b pb-2">
          <strong>{{ msg.name }}</strong> - {{ msg.subject }}<br>
          <span class="text-gray-500">{{ msg.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
        </li>
      {% else %}
        <li class="text-gray-400">No recent messages</li>
      {% endfor %}
    </ul>
  </div>
</div>

<!-- Chart Script -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('ratingsChart').getContext('2d');
  const ratingsChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: {{ rating_data.labels | safe }},
      datasets: [{
        label: 'Number of Reviews',
        data: {{ rating_data.counts | safe }},
        backgroundColor: 'rgba(59, 130, 246, 0.6)'
      }]
    },
    options: {
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>
